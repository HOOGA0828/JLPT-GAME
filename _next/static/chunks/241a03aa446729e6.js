(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,3007,68834,62388,e=>{"use strict";let t,r;var a=e.i(71645);let n=e=>{let t,r=new Set,a=(e,a)=>{let n="function"==typeof e?e(t):e;if(!Object.is(n,t)){let e=t;t=(null!=a?a:"object"!=typeof n||null===n)?n:Object.assign({},t,n),r.forEach(r=>r(t,e))}},n=()=>t,i={setState:a,getState:n,getInitialState:()=>l,subscribe:e=>(r.add(e),()=>r.delete(e))},l=t=e(a,n,i);return i},i=e=>{let t=e?n(e):n,r=e=>(function(e,t=e=>e){let r=a.default.useSyncExternalStore(e.subscribe,a.default.useCallback(()=>t(e.getState()),[e,t]),a.default.useCallback(()=>t(e.getInitialState()),[e,t]));return a.default.useDebugValue(r),r})(t,e);return Object.assign(r,t),r},l=e=>e?i(e):i;e.s(["create",()=>l],68834);let s=e=>t=>{try{let r=e(t);if(r instanceof Promise)return r;return{then:e=>s(e)(r),catch(e){return this}}}catch(e){return{then(e){return this},catch:t=>s(t)(e)}}},o=l()((t=e=>({language:"zh",setLanguage:t=>e({language:t}),toggleLanguage:()=>e(e=>({language:"zh"===e.language?"en":"zh"}))}),r={name:"language-storage"},(e,a,n)=>{let i,l={storage:function(e,t){let r;try{r=e()}catch(e){return}return{getItem:e=>{var t;let a=e=>null===e?null:JSON.parse(e,void 0),n=null!=(t=r.getItem(e))?t:null;return n instanceof Promise?n.then(a):a(n)},setItem:(e,t)=>r.setItem(e,JSON.stringify(t,void 0)),removeItem:e=>r.removeItem(e)}}(()=>window.localStorage),partialize:e=>e,version:0,merge:(e,t)=>({...t,...e}),...r},o=!1,c=0,d=new Set,u=new Set,m=l.storage;if(!m)return t((...t)=>{console.warn(`[zustand persist middleware] Unable to update item '${l.name}', the given storage is currently unavailable.`),e(...t)},a,n);let g=()=>{let e=l.partialize({...a()});return m.setItem(l.name,{state:e,version:l.version})},h=n.setState;n.setState=(e,t)=>(h(e,t),g());let p=t((...t)=>(e(...t),g()),a,n);n.getInitialState=()=>p;let f=()=>{var t,r;if(!m)return;let n=++c;o=!1,d.forEach(e=>{var t;return e(null!=(t=a())?t:p)});let h=(null==(r=l.onRehydrateStorage)?void 0:r.call(l,null!=(t=a())?t:p))||void 0;return s(m.getItem.bind(m))(l.name).then(e=>{if(e)if("number"!=typeof e.version||e.version===l.version)return[!1,e.state];else{if(l.migrate){let t=l.migrate(e.state,e.version);return t instanceof Promise?t.then(e=>[!0,e]):[!0,t]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}return[!1,void 0]}).then(t=>{var r;if(n!==c)return;let[s,o]=t;if(e(i=l.merge(o,null!=(r=a())?r:p),!0),s)return g()}).then(()=>{n===c&&(null==h||h(i,void 0),i=a(),o=!0,u.forEach(e=>e(i)))}).catch(e=>{n===c&&(null==h||h(void 0,e))})};return n.persist={setOptions:e=>{l={...l,...e},e.storage&&(m=e.storage)},clearStorage:()=>{null==m||m.removeItem(l.name)},getOptions:()=>l,rehydrate:()=>f(),hasHydrated:()=>o,onHydrate:e=>(d.add(e),()=>{d.delete(e)}),onFinishHydration:e=>(u.add(e),()=>{u.delete(e)})},l.skipHydration||f(),i||p}));e.s(["useLanguageStore",0,o],3007),e.s(["translations",0,{zh:{home:{title_prefix:"JLPT",title_suffix:"大師",subtitle:"",quiz_title:"每日測驗挑戰",quiz_desc:"N1-N3 混合適性測驗",learn_title:"字典",learn_desc:"搜尋與探索"},setup:{title:"測驗設定",subtitle:"自訂您的挑戰組合",n1_btn:"N1",n2_btn:"N2",n3_btn:"N3",n1_label:"N1",n2_label:"N2",n3_label:"N3",total_label:"總題數",start_btn:"開始挑戰",warning_total:"請調整題目總數至 20 題",back:"回首頁"},play:{next_btn:"下一題",exit_btn:"回首頁",question_progress:"進度",confirm_quit:"確定要退出嗎？",cancel:"取消",confirm:"確定"},learn:{title:"字典",back_home:"回首頁",search_placeholder:"搜尋漢字...",n1:"N1",n2:"N2",n3:"N3"},result:{title:"最終成績",correct:"答對",total:"總數",review_title:"詳細檢討",try_again:"再試一次",back_home:"回首頁",encouragement:{perfect:"太神了！簡直是漢字大師！",great:"做得好！繼續保持！",good:"不錯喔！再接再厲。",practice:"繼續練習，你會進步的！"},review_list:{kanji:"漢字",meaning:"意思",your_answer:"您的回答",correct_answer:"正確答案"}}},en:{home:{title_prefix:"JLPT",title_suffix:"Master",subtitle:"Zen-Modern Kanji Mastery.",quiz_title:"Daily Quiz Challenge",quiz_desc:"Adaptive N1-N3 Mix",learn_title:"Visual Dictionary",learn_desc:"Search & Explore"},setup:{title:"Quiz Setup",subtitle:"Customize your challenge matrix",n1_btn:"N1 Only",n2_btn:"N2 Only",n3_btn:"N3 Only",n1_label:"N1 Advanced",n2_label:"N2 Intermediate",n3_label:"N3 Basic",total_label:"Total Questions",start_btn:"Start Challenge",warning_total:"Total must be 20 questions",back:"Back Home"},play:{next_btn:"Next Question",exit_btn:"Exit",question_progress:"Quest",confirm_quit:"Are you sure you want to quit?",cancel:"Cancel",confirm:"Confirm"},learn:{title:"Visual Dictionary",back_home:"Back Home",search_placeholder:"Search Kanji...",n1:"N1 Advanced",n2:"N2 Intermediate",n3:"N3 Basic"},result:{title:"Final Score",correct:"Correct",total:"Total",review_title:"Review Mistakes",try_again:"Try Again",back_home:"Back Home",encouragement:{perfect:"Excellent! You are a master.",great:"Great job! Keep it up.",good:"Good effort. Just a bit more practice.",practice:"Keep practicing. You'll get there!"},review_list:{kanji:"Kanji",meaning:"Meaning",your_answer:"You Chose",correct_answer:"Correct"}}}}],62388)},75254,e=>{"use strict";var t=e.i(71645);let r=(...e)=>e.filter((e,t,r)=>!!e&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),a=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let i=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:i=2,absoluteStrokeWidth:l,className:s="",children:o,iconNode:c,...d},u)=>(0,t.createElement)("svg",{ref:u,...n,width:a,height:a,stroke:e,strokeWidth:l?24*Number(i)/Number(a):i,className:r("lucide",s),...!o&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(d)&&{"aria-hidden":"true"},...d},[...c.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(o)?o:[o]])),l=(e,n)=>{let l=(0,t.forwardRef)(({className:l,...s},o)=>(0,t.createElement)(i,{ref:o,iconNode:n,className:r(`lucide-${a(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,l),...s}));return l.displayName=a(e),l};e.s(["default",()=>l],75254)},18566,(e,t,r)=>{t.exports=e.r(76562)},31487,e=>{"use strict";var t=e.i(74590),r=e.i(59778),a=e.i(52924);let n=(e,t)=>e.filter(e=>e.kanji&&e.reading&&e.meaning_zh&&Array.isArray(e.distractors)&&e.distractors.length>0).map(e=>({kanji:e.kanji,reading:e.reading,meaning_zh:e.meaning_zh,distractors:e.distractors,level:t,game_enabled:e.game_enabled}));e.s(["getAllQuestions",0,()=>[...n(t.default,"N1"),...n(r.default,"N2"),...n(a.default,"N3")]])},4421,e=>{"use strict";var t=e.i(68834),r=e.i(31487);let a=(0,t.create)((e,t)=>({questions:[],n1Count:5,n2Count:10,n3Count:5,isHybrid:!0,isPlaying:!1,currentIndex:0,answers:[],startTime:0,setCounts:(t,r,a)=>e({n1Count:t,n2Count:r,n3Count:a}),startQuiz:()=>{let{n1Count:a,n2Count:n,n3Count:i}=t(),l=(0,r.getAllQuestions)(),s=l.filter(e=>"N1"===e.level&&!1!==e.game_enabled).sort(()=>.5-Math.random()),o=l.filter(e=>"N2"===e.level&&!1!==e.game_enabled).sort(()=>.5-Math.random()),c=l.filter(e=>"N3"===e.level&&!1!==e.game_enabled).sort(()=>.5-Math.random());e({questions:[...s.slice(0,a),...o.slice(0,n),...c.slice(0,i)].sort(()=>.5-Math.random()),isPlaying:!0,currentIndex:0,answers:[],startTime:Date.now()})},answerQuestion:r=>{let{questions:a,currentIndex:n,answers:i}=t(),l=a[n],s=r===l.reading;e({answers:[...i,{question:l,selected:r,isCorrect:s,timeTaken:Date.now()-t().startTime}]})},nextQuestion:()=>{let{currentIndex:r,questions:a}=t();r<a.length-1?e({currentIndex:r+1}):t().endQuiz()},endQuiz:()=>{e({isPlaying:!1})},resetQuiz:()=>{e({isPlaying:!1,currentIndex:0,answers:[]})}}));e.s(["useQuizStore",0,a])},69638,73884,e=>{"use strict";var t=e.i(75254);let r=(0,t.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>r],69638);let a=(0,t.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],73884)},90486,e=>{"use strict";var t=e.i(43476),r=e.i(71645),a=e.i(18566),n=e.i(4421),i=e.i(3007),l=e.i(62388),s=e.i(46932),o=e.i(88653),c=e.i(69638),d=e.i(73884),u=e.i(75254);let m=(0,u.default)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),g=(0,u.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var h=e.i(47163);function p(){let e=(0,a.useRouter)(),{questions:u,currentIndex:p,isPlaying:f,answers:y,answerQuestion:x,nextQuestion:b}=(0,n.useQuizStore)(),{language:v}=(0,i.useLanguageStore)(),_=l.translations[v].play,[w,k]=(0,r.useState)(null),[j,N]=(0,r.useState)(!1),[C,z]=(0,r.useState)(0);(0,r.useEffect)(()=>{f&&0!==u.length||e.push("/quiz/setup")},[f,u,e]),(0,r.useEffect)(()=>{let e=setInterval(()=>{z(e=>e+1)},1e3);return()=>clearInterval(e)},[]);let S=u[p];(0,r.useEffect)(()=>{if(j){let e=setTimeout(()=>{A()},1200);return()=>clearTimeout(e)}},[j]);let I=(0,r.useMemo)(()=>S?[S.reading,...S.distractors].sort(()=>.5-Math.random()):[],[S]),A=()=>{k(null),N(!1),p===u.length-1?e.push("/quiz/result"):b()},q=(0,r.useRef)(null),[T,E]=(0,r.useState)(!1);if((0,r.useEffect)(()=>{q.current&&q.current.focus()},[]),!S)return null;let M=w===S.reading;return(0,t.jsxs)("main",{ref:q,tabIndex:-1,className:"flex-center flex-col",style:{minHeight:"100vh",background:"var(--bg-secondary)",padding:"1.5rem",position:"relative",overflow:"hidden",outline:"none"},children:[(0,t.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",zIndex:0,pointerEvents:"none",background:"radial-gradient(circle at 50% 30%, rgba(255,255,255,0.4) 0%, transparent 70%)"}}),(0,t.jsx)(o.AnimatePresence,{children:T&&(0,t.jsx)(s.motion.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",inset:0,zIndex:100,display:"flex",alignItems:"center",justifyContent:"center",background:"rgba(0,0,0,0.5)",backdropFilter:"blur(4px)",padding:"1rem"},onClick:()=>E(!1),children:(0,t.jsxs)(s.motion.div,{initial:{opacity:0,scale:.95,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:10},className:"glass-card",style:{width:"100%",maxWidth:"320px",padding:"2rem",textAlign:"center",boxShadow:"var(--shadow-xl)",background:"var(--bg-white)",position:"relative"},onClick:e=>e.stopPropagation(),children:[(0,t.jsx)("h3",{style:{fontSize:"1.25rem",fontWeight:800,marginBottom:"1.5rem",color:"var(--text-primary)"},children:_.confirm_quit}),(0,t.jsxs)("div",{className:"flex-center",style:{gap:"1rem"},children:[(0,t.jsx)("button",{onClick:()=>E(!1),className:"btn btn-outline",style:{flex:1,justifyContent:"center"},children:_.cancel}),(0,t.jsx)("button",{onClick:()=>e.push("/home"),className:"btn btn-primary",style:{flex:1,justifyContent:"center",background:"#ef4444",border:"none"},children:_.confirm})]})]})})}),(0,t.jsxs)("div",{style:{width:"100%",maxWidth:"42rem",display:"flex",flexDirection:"column",gap:"1rem",marginBottom:"2rem",zIndex:10},children:[(0,t.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[(0,t.jsx)("button",{onClick:()=>E(!0),className:"glass-card",style:{display:"flex",alignItems:"center",justifyContent:"center",width:"2.5rem",height:"2.5rem",borderRadius:"50%",cursor:"pointer",color:"var(--text-secondary)",padding:0},children:(0,t.jsx)(g,{size:20})}),(0,t.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem",color:"var(--text-secondary)",fontFamily:"var(--font-mono)"},children:[(0,t.jsx)(m,{size:18}),(0,t.jsxs)("span",{children:[Math.floor(C/60).toString().padStart(2,"0"),":",(C%60).toString().padStart(2,"0")]})]})]}),(0,t.jsx)("div",{style:{display:"flex",gap:"4px",width:"100%",height:"8px"},children:u.map((e,r)=>{let a="var(--border-color)";return r<y.length?a=y[r].isCorrect?"#4ade80":"#f87171":r===p&&(a="var(--text-primary)"),(0,t.jsx)(s.motion.div,{initial:!1,animate:{backgroundColor:a},style:{flex:1,borderRadius:"4px",height:"100%"}},r)})})]}),(0,t.jsx)("div",{style:{width:"100%",maxWidth:"30rem",marginBottom:"2rem",zIndex:10,position:"relative"},children:(0,t.jsx)(o.AnimatePresence,{mode:"wait",children:(0,t.jsxs)(s.motion.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},className:"glass-card",style:{padding:"2.5rem",textAlign:"center",willChange:"transform, opacity"},children:[(0,t.jsx)("span",{className:(0,h.cn)("badge","N1"===S.level&&"badge-n1","N2"===S.level&&"badge-n2","N3"===S.level&&"badge-n3"),style:{marginBottom:"1.5rem"},children:S.level}),(0,t.jsx)("h2",{style:{fontSize:"4rem",fontWeight:900,marginBottom:"2rem",fontFamily:"var(--font-mono)"},children:S.kanji}),(0,t.jsx)("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"0.75rem",width:"100%"},children:I.map((e,r)=>{let a=w===e,n=e===S.reading,i="var(--bg-secondary)",l="var(--text-secondary)",o="2px solid transparent";return j?n?(i="#dcfce7",o="2px solid #22c55e",l="#15803d"):a&&!M?(i="#fee2e2",o="2px solid #ef4444",l="#b91c1c"):l="var(--text-muted)":a&&(i="var(--text-primary)",l="white"),(0,t.jsxs)(s.motion.button,{whileTap:{scale:.98},onClick:()=>{!j&&(k(e),N(!0),x(e))},disabled:j,style:{width:"100%",padding:"1rem",borderRadius:"var(--radius-lg)",fontSize:"1.125rem",fontWeight:500,border:o,background:i,color:l,position:"relative",cursor:j?"default":"pointer",transition:"all 0.2s"},children:[e,j&&n&&(0,t.jsx)(c.CheckCircle,{style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",color:"#22c55e"},size:20}),j&&a&&!M&&(0,t.jsx)(d.XCircle,{style:{position:"absolute",right:"1rem",top:"50%",transform:"translateY(-50%)",color:"#ef4444"},size:20})]},r)})})]},p)})})]})}e.s(["default",()=>p],90486)}]);